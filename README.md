# Documents

- The location of latex documents: .
- The matlab figure-generating scripts are missing. The new gen script is created and saved in this repo. 

# Experiments Settings

In this repo, you can find the following stuffs:
- All the solver codes (i.e.: libmf, als, alscg and gauss). The libmf code is stored in **libmf** folder and others are stored in **libmf_matlab** folder.
- All the experiment scripts for properly runing the experiments.
- All the raw logs, which generated by each solvers.
- All the ipython notebook to generate figs in the paper. 

## Experiment Organization

The master branch is responsible to store all the common code across experiments.
For each dataset, we checkout a new branch to store custumed code.
If you are going to reproduce or do experiments on each data set. 
Please checkout to proper branch first.

- ml1m:
```
git checkout ml1m
```
- ml10m:
```
git checkout ml10m
```
- nf:
```
git checkout nf
```

In each dataset branch, you will find the following folders
- data: place your dataset data here
- libmf: run libmf code here
- libmf_matlab: run als, alscg, gauss code here
- analysis: generate figures
- old-code: useless code


## Run Experiments

### Checkout to proper branch

```
git checkout ml1m
```

### Link Data to **data** Folder

Use **link-data.sh** in **data** to link your data.
Suppose you data is in **source_data** folder, you can run link-data.sh with your folders' absolute path 
```
cd data
./link-data.sh source_folder_absolute_path
```

**Make sure you name your data properly!!!!!!!!**
- Name your training data as **tr** 
- Name your validation data as **va**

### Create and Save Initializaed Model

- Save initailized model for matlab solver, because we want libmf and matlab code run on the same model initialization.
```shell
cd libmf // Go to libmf folder. If you are already in there, skip it.
./save-init-model.sh
```

### Overview of Experiment Settings

The following sheets store the each experiments parameters.
[Gauss Experiments Settings](https://docs.google.com/spreadsheets/d/1LeEVyJ3wWNQ60Hk0K3AakUyxCzPNYGPLBnsr6ygBSAg/edit#gid=0)


### Run Libmf Code. 

- Use libmf/run.sh script to run the libmf experiments.

### Run Libmf Matlab Code

Becuase we have some c codes need to be compile to matlab binary, **make it before your run any experiment**!
```shell
./make.sh
```

Each script is responsible to run certain parameter settings. 
The script with **-tigh.sh** suffix is the on using tighter cg condition.
- alscg.sh 
- alscg-tight.sh  
- als.sh  
- gauss.sh  
- gauss-tight.sh

If you want to grid alscg, you can simply edit
```
enable_gpu=0
lambda=(1 5e-1 1e-1 5e-2 1e-2 5e-3 1e-3)
d=40
t=100
eta=0.3
cgt=20
```





















